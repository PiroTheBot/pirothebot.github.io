<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Repository Pattern — Learning Corner</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<script>
tailwind.config = {
theme: {
extend: {
colors: {
primary: '#00FF88',
bg: { main: '#0D0D0D', card: '#1A1A1A', code: '#111' },
text: { primary: '#FFFFFF', muted: '#888888' },
border: { subtle: '#333333' }
},
fontFamily: {
sans: ['Inter', 'sans-serif'],
mono: ['JetBrains Mono', 'monospace']
}
}
}
}
</script>
<style>
body{font-family:'Inter',sans-serif;background:#0D0D0D;color:#fff;line-height:1.6}
code{font-family:'JetBrains Mono',monospace}
::-webkit-scrollbar{width:6px}
::-webkit-scrollbar-track{background:#0D0D0D}
::-webkit-scrollbar-thumb{background:#333;border-radius:3px}
.keyword{color:#a78bfa}.type{color:#60a5fa}.function{color:#22d3ee}.variable{color:#fbbf24}
</style>
</head>
<body class="bg-bg-main text-text-primary">
<!-- Progress -->
<div class="fixed top-0 left-0 w-full h-0.5 bg-bg-card z-50">
<div id="progress" class="h-full bg-primary transition-all duration-100" style="width:0"></div>
</div>

<!-- Header -->
<header class="border-b border-border-subtle py-4">
<div class="max-w-4xl mx-auto px-6 flex items-center justify-between">
<a href="/learning/category/design-patterns.html" class="text-text-muted hover:text-primary transition-colors text-sm">← Design Patterns</a>
<span class="text-xs text-text-muted">Learning Corner</span>
</div>
</header>

<!-- Hero -->
<section class="py-16 px-6">
<div class="max-w-4xl mx-auto">
<span class="inline-block px-3 py-1 bg-primary/20 text-primary text-xs font-medium rounded-full mb-4">Beginner</span>
<h1 class="text-3xl md:text-4xl font-bold mb-3 tracking-tight">The Repository Pattern</h1>
<p class="text-text-muted text-lg">Abstract database access in your applications</p>
<div class="flex items-center gap-4 mt-4 text-text-muted text-sm">
<span>10 min read</span>
<span>•</span>
<span>Layman → Intermediate</span>
</div>
</div>
</section>

<!-- Content -->
<main class="max-w-4xl mx-auto px-6 pb-16">
<!-- What -->
<section class="mb-12">
<h2 class="text-xl font-semibold mb-6">What is it?</h2>
<div class="bg-bg-card border border-border-subtle rounded-lg p-6 mb-6">
<p class="text-text-muted mb-4">The Repository Pattern is a layer between your application and the database. It gives you a clean, object-oriented interface for data access.</p>
<div class="bg-bg-code rounded-lg p-4">
<svg viewBox="0 0 400 120" class="w-full h-auto max-w-lg mx-auto">
<ellipse cx="50" cy="30" rx="25" ry="8" fill="none" stroke="#333" stroke-width="2"/>
<path d="M25 30 Q25 50, 50 50 Q75 50, 75 30" fill="none" stroke="#333" stroke-width="2"/>
<ellipse cx="50" cy="30" rx="25" ry="8" fill="rgba(0,255,136,0.1)"/>
<circle cx="25" cy="30" r="3" fill="#00FF88"/>
<circle cx="75" cy="30" r="3" fill="#00FF88"/>
<line x1="30" y1="30" x2="45" y2="22" stroke="#00FF88" stroke-width="2"/>
<line x1="70" y1="30" x2="55" y2="22" stroke="#00FF88" stroke-width="2"/>
<rect x="125" y="10" width="130" height="80" rx="6" fill="#1a1a1a" stroke="#00FF88" stroke-width="2"/>
<circle cx="190" cy="35" r="10" fill="none" stroke="#00FF88" stroke-width="2"/>
<circle cx="190" cy="35" r="4" fill="#00FF88"/>
<text x="190" y="65" text-anchor="middle" fill="#00FF88" font-size="10" font-weight="600">REPOSITORY</text>
<line x1="260" y1="50" x2="285" y2="45" stroke="#3b82f6" stroke-width="2"/>
<rect x="290" y="30" width="50" height="40" rx="4" fill="#1a1a1a" stroke="#3b82f6" stroke-width="2"/>
<text x="315" y="55" text-anchor="middle" fill="#888" font-size="8">Your Code</text>
</svg>
</div>
</div>
</section>

<!-- Why -->
<section class="mb-12">
<h2 class="text-xl font-semibold mb-6">Why use it?</h2>
<div class="grid md:grid-cols-2 gap-4">
<div class="bg-bg-card border border-border-subtle rounded-lg p-5">
<h3 class="font-medium mb-2">Single Source</h3>
<p class="text-text-muted text-sm">All data access logic in one place</p>
</div>
<div class="bg-bg-card border border-border-subtle rounded-lg p-5">
<h3 class="font-medium mb-2">Testability</h3>
<p class="text-text-muted text-sm">Swap real DB for mock data in tests</p>
</div>
<div class="bg-bg-card border border-border-subtle rounded-lg p-5">
<h3 class="font-medium mb-2">Database Independence</h3>
<p class="text-text-muted text-sm">Switch databases without rewriting code</p>
</div>
<div class="bg-bg-card border border-border-subtle rounded-lg p-5">
<h3 class="font-medium mb-2">Clean Architecture</h3>
<p class="text-text-muted text-sm">No SQL scattered in your application</p>
</div>
</div>
</section>

<!-- When -->
<section class="mb-12">
<h2 class="text-xl font-semibold mb-6">When to use it</h2>
<div class="grid md:grid-cols-2 gap-4">
<div class="bg-bg-card border-l-4 border-primary rounded-r-lg p-5">
<h3 class="font-medium text-primary mb-3">Use when:</h3>
<ul class="space-y-2 text-text-muted text-sm">
<li>• Multiple data sources (DB, API, cache)</li>
<li>• Need unit tests without database</li>
<li>• Complex data access logic</li>
<li>• Want database-agnostic code</li>
</ul>
</div>
<div class="bg-bg-card border-l-4 border-yellow-500 rounded-r-lg p-5">
<h3 class="font-medium text-yellow-500 mb-3">Skip if:</h3>
<ul class="space-y-2 text-text-muted text-sm">
<li>• Very simple CRUD operations</li>
<li>• ORM already provides good abstraction</li>
<li>• Rapid prototyping phase</li>
</ul>
</div>
</div>
</section>

<!-- How -->
<section class="mb-12">
<h2 class="text-xl font-semibold mb-6">How it works</h2>

<div class="mb-8">
<h3 class="text-lg font-medium mb-4">1. Define the interface</h3>
<pre class="bg-bg-code rounded-lg p-4 overflow-x-auto text-sm"><code><span class="keyword">interface</span> <span class="type">UserRepository</span> {
    <span class="function">findById</span>(id: <span class="type">string</span>): <span class="type">Promise</span>&lt;<span class="type">User</span>&gt;;
    <span class="function">save</span>(user: <span class="type">User</span>): <span class="type">Promise</span>&lt;<span class="type">void</span>&gt;;
}</code></pre>
</div>

<div class="mb-8">
<h3 class="text-lg font-medium mb-4">2. Implement it</h3>
<pre class="bg-bg-code rounded-lg p-4 overflow-x-auto text-sm"><code><span class="keyword">class</span> <span class="type">PostgresRepo</span> <span class="keyword">implements</span> <span class="type">UserRepository</span> {
    <span class="keyword">constructor</span>(<span class="variable">private</span> db: <span class="type">Database</span>) {}
    <span class="keyword">async</span> <span class="function">findById</span>(id) {
        <span class="keyword">return await</span> <span class="variable">this</span>.db.<span class="function">query</span>(...);
    }
}</code></pre>
</div>

<div>
<h3 class="text-lg font-medium mb-4">3. Use in your code</h3>
<pre class="bg-bg-code rounded-lg p-4 overflow-x-auto text-sm"><code><span class="keyword">class</span> <span class="type">UserService</span> {
    <span class="keyword">constructor</span>(<span class="variable">private</span> repo: <span class="type">UserRepository</span>) {}
    <span class="keyword">async</span> <span class="function">register</span>(email) {
        <span class="keyword">const</span> exists = <span class="keyword">await</span> <span class="variable">this</span>.repo.<span class="function">findByEmail</span>(email);
    }
}</code></pre>
</div>
</section>

<!-- Architecture -->
<section class="mb-12">
<h2 class="text-xl font-semibold mb-6">Architecture</h2>
<div class="bg-bg-card border border-border-subtle rounded-lg p-6">
<svg viewBox="0 0 500 100" class="w-full h-auto max-w-2xl mx-auto">
<rect x="20" y="30" width="70" height="35" rx="4" fill="#3b82f6"/>
<text x="55" y="53" text-anchor="middle" fill="white" font-size="9" font-weight="500">Controllers</text>
<line x1="95" y1="47" x2="115" y2="47" stroke="#3b82f6" stroke-width="2"/>
<rect x="120" y="30" width="70" height="35" rx="4" fill="#fbbf24"/>
<text x="155" y="53" text-anchor="middle" fill="#0D0D0D" font-size="9" font-weight="500">Services</text>
<line x1="195" y1="47" x2="215" y2="47" stroke="#fbbf24" stroke-width="2"/>
<rect x="220" y="30" width="90" height="35" rx="4" fill="#00FF88"/>
<text x="265" y="53" text-anchor="middle" fill="#0D0D0D" font-size="9" font-weight="500">Repositories</text>
<line x1="265" y1="70" x2="265" y2="90" stroke="#00FF88" stroke-width="2"/>
<ellipse cx="265" cy="100" rx="50" ry="15" fill="#1a1a1a" stroke="#333" stroke-width="2"/>
<text x="265" y="105" text-anchor="middle" fill="white" font-size="10">Database</text>
</svg>
</div>
</section>

<!-- Takeaways -->
<section class="mb-12">
<h2 class="text-xl font-semibold mb-6">Key Takeaways</h2>
<ul class="space-y-3">
<li class="flex items-start gap-3 bg-bg-card border border-border-subtle rounded-lg p-4">
<span class="text-primary mt-0.5">✓</span>
<div><strong class="font-medium">Abstraction</strong><p class="text-text-muted text-sm mt-1">Hides database complexity behind a clean interface</p></div>
</li>
<li class="flex items-start gap-3 bg-bg-card border border-border-subtle rounded-lg p-4">
<span class="text-primary mt-0.5">✓</span>
<div><strong class="font-medium">Single Responsibility</strong><p class="text-text-muted text-sm mt-1">One repository per entity/domain</p></div>
</li>
<li class="flex items-start gap-3 bg-bg-card border border-border-subtle rounded-lg p-4">
<span class="text-primary mt-0.5">✓</span>
<div><strong class="font-medium">Testability</strong><p class="text-text-muted text-sm mt-1">Easy to mock in unit tests</p></div>
</li>
<li class="flex items-start gap-3 bg-bg-card border border-border-subtle rounded-lg p-4">
<span class="text-primary mt-0.5">✓</span>
<div><strong class="font-medium">Flexibility</strong><p class="text-text-muted text-sm mt-1">Swap database implementations easily</p></div>
</li>
</ul>
</section>

<!-- Nav -->
<nav class="flex items-center justify-between py-6 border-t border-border-subtle">
<a href="/learning/category/design-patterns.html" class="text-text-muted hover:text-primary transition-colors text-sm">← All Topics</a>
<a href="#" class="text-text-muted hover:text-primary transition-colors text-sm">↑ Top</a>
</nav>
</main>

<script>
window.addEventListener('scroll',()=>{
const s=document.documentElement.scrollTop,h=document.documentElement.scrollHeight-window.innerHeight;
document.getElementById('progress').style.width=(s/h*100)+'%';
});
</script>
</body>
</html>
